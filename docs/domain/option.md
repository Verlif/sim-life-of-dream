# 选项

选项是依附于事件的项目，无法独立存在。但一个选项可以绑定多个事件（大多数情况下不会这样做），并且可以提供多个结果。

一般来说，选项是用来做事件指引的。

## 属性

- __followEvents__ - 依附的事件Key列表。当没有依附于事件时，仅能作为世界选项被手动添加。
- __followItems__ - 依附的道具Key列表。当依附于道具时，可由道具进行选项触发。
- __key__ - 选项唯一键值。默认为选项标题。
- __name(must)__ - 选项名称。
- __desc__ - 选项描述。用于选择选项后展示。
- __print__ - 选项打印。选项选择后会自动调用`kit.message`来输出。
- __chance__ - 选项出现概率。选项默认全概率 __出现__。
- __condition__ - 选项出现条件。选项默认 __不需要条件__。
- __exec__ - 选项触发效果。当选项被选择时会被触发。
- __order__ - 排序权重。权重越大，显示排序越 __靠后__，权重相同时随机排序。默认 __20__。
- __resultList__ - 选项结果列表。
- __linkEvent__ - 直接关联的事件Key。触发此选项时会直接将此事件添加到当前事件列表的 __首位__。

举例：

```json
{
  "followEvents": [
    "小学.作业忘带"
  ],
  "key": "小学.作业忘带.请假回家去拿",
  "name": "请假回家去拿",
  "desc": "有50%几率成功",
  "print": "你向老师请个假，去回家那作业",
  "order": 1,
  "resultList": [
    {
      "chance": "400",
      "desc": "老师希望你下次注意，也没有让你回去拿"
    },
    {
      "chance": "400",
      "desc": "老师同意你回家去拿了"
    }
  ]
}
```

最简写法（`followEvents`、`followItems`与`resultList`按需填写）：

```json
{
  "name": "作业忘带"
}
```

## 结果列表

`resultList`中存放的就是结果列表。结果属性如下：

- __print__ - 结果描述。用于结果触发后展示。
- __condition__ - 结果触发条件。结果默认 __不需要条件__。
- __chance__ - 结果触发概率。选项在世界数据中时，不需要判定概率。结果默认触发概率权重为 __100__。
- __exec__ - 结果触发效果。
- __linkEvent__ - 直接关联的事件Key。触发此选项时会直接将此事件添加到当前事件列表的 __首位__。

举例：

```json
{
  "condition": "@{role.age.value} > 2",
  "chance": "200",
  "print": "你做了一个梦。",
  "exec": "role.attr.mood.up 5",
  "linkEvent": "逃跑"
}
```

选项结果没有最简写法，因为每一项都是可选的，例如可以只有`desc`，也可以只有`chance`（但这样做没有意义）。

结果的触发概率计算方式为权重模式，计算所有可用结果的总概率权重，然后按照每个结果的权重来选择触发。

## 其他

- 选项可以单独做成拓展包，便于调整事件的合理性与丰富度。
- 依附于事件的选项会在事件被触发时进行可用判定，若条件满足且概率通过，则会在此事件中发现此选项。在选项判定后，此事件的选项在本次触发时就不会再改变了。
- `desc`与`print`会相互填充，若不希望被填充，可以通过设置空字符串来避免，例如`"desc": ""`。
- 当选项拥有 __linkEvent__ 且选项结果同样拥有 __linkEvent__ 时，会先添加选项的直链事件，后添加选项结果的直链事件。所以选项结果的直链事件会排在第一位。
- 选项结果中的 __linkEvent__ 与 __exec__ 中，__exec__ 的优先级更高，所以 __linkEvent__ 中添加的事件会出现在队列首位。