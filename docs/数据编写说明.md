# 数据编写说明

在编写资源时，需要遵循统一的规则。

## 统一规则

- 项目概率。

    1. 描述格式。项目概率使用的是数字，这要求概率描述也应该为数字。例如`20`。
    2. 使用运算符号。概率描述允许使用`+`、`-`、`*`、`/`、`%`*(表示了余数)* 五个运算符号，但不支持括号。例如`1 + 2 * 3 / 4 - 5`，但最终只会得到一个整数，而不是小数。
    3. 使用变量。要使用游戏内变量时，需要使用变量标志`@{}`，并且所使用的变量值也需要是数字。例如`@{role.info.age}`。
    4. 数值控制。项目的概率统一为万分比。例如`20`则表示为`20/10000`。
    5. 默认值。当项目概率没有显示标注时，则表示概率为`0`。

- 项目条件。

    1. 描述格式。条件所使用的描述结果必须是布尔值。例如`true`。
    2. 使用运算符号。与概率相似，支持使用`+`、`-`、`*`、`/`、`%`*(表示了余数)* 五个运算符号，但不支持括号。当使用数字判定时，可以使用的判定符号有`<`、`=`、`>`。例如`2 > 3`。
    3. 描述组合。当需要使用多个概率进行组合时，可以使用`&`来表示并列，可以使用`;`来表示或者。例如`1 + 2 * 3 - 4 / 2 < 3 * 5; 1 = 2 & 2 > 4; 3 > 3 + 4 / 1 * 2`。
    4. 使用变量。要使用游戏内变量时，需要使用变量标志`@{}`，例如`@{role.tag.has 生病} & @{role.info.age.value} > 5`。
    5. 默认值。当项目条件没有显示标注时，则表示不需要条件。

- 变量。

  1. 变量指的是游戏内数据的占位符，使用`@{}`作为标识，例如`@{role.info.name.text}`会被转换成角色的名称、`@{role.info.age.value}`会被转换成角色的年龄。
  2. 变量在以下场景可用：
  
     1. __kit.message__
     2. __项目中的desc__
     3. __项目条件__
     4. __项目概率__
     5. __项目效果（包括添加效果、执行效果、移除效果等）__

- 项目唯一键值

    1. 项目唯一键值是每个项目的表示，同一类型的项目唯一键值不能相同，在编写项目数据时必要。
    2. 不同类型的项目唯一键值不冲突，例如道具的唯一键值可以与事件的唯一键值重复，两个不会冲突。
    3. 在加载不同的数据包时，同类型项目的唯一键值冲突时，只会加载最后加载的数据包的项目。也就是可以通过后加载资源包的方式来替换之前资源包中的项目，实现数据更新或是替换。